### 一、 基本定義

- **VLAN (Virtual Local Area Network)**：在物理交換機的基礎上，透過邏輯設定將網路劃分為多個獨立的「廣播域」。
- **核心功能**：隔離流量。即便設備插在同一台交換機上，只要屬於不同 VLAN，在二層（L2）層面就無法直接通訊。

### 二、 為什麼要使用 VLAN？

1. **抑制廣播風暴**：將廣播封包限制在單一 VLAN 內，避免無效流量佔滿整個實體網路頻寬。
2. **增強安全性**：敏感設備（如監視器、財務主機）可獨立成網，防止其他網段的設備隨意存取。
3. **靈活管理**：更改設備所屬網路只需修改交換機設定，不需重新佈線。

### 三、 VLAN 的機制 (Tagging)

VLAN 的運作依賴於在乙太網幀（Ethernet Frame）中插入一個 **802.1Q 標籤**。
#### 1. 接入模式 (Access Port / Untagged)

- **角色**：連接一般終端設備（電腦、印表機、IoT）。
- **邏輯**：
    - **進入交換機時**：給原始數據「打上標籤」（編碼）。
    - **離開交換機時**：將標籤「剝離」（解碼），恢復成普通數據。
- **特性**：終端設備完全不需要支援 VLAN，對它們來說是透明的。

#### 2. 中繼模式 (Trunk Port / Tagged)

- **角色**：連接交換機與交換機、或交換機與路由器。
- **邏輯**：**保留標籤**直接傳輸。
- **特性**：允許一條物理線路同時負載多個 VLAN 的流量（單線複用）。

### 四、 VLAN 間通訊 (Inter-VLAN Routing)

- **原理**：VLAN 本質是二層隔離。若要讓 VLAN 10 的電腦連上 VLAN 20 的印表機，必須經過 **三層設備（路由器或三層交換機）**。
- **單臂路由 (Router-on-a-stick)**：透過一條 Trunk 線路連接路由器，讓路由器在邏輯子介面之間進行轉發。

### 六、 關鍵術語對照

- **PVID (Port VLAN ID)**：定義 Access 埠接收到「無標籤封包」時，預設要歸類到哪個 VLAN。
    
- **VID (VLAN ID)**：標籤內的數字，範圍通常為 1~4094。
    
- **VLAN 1**：大多數交換機的出廠預設 VLAN，所有埠預設都在此網段。